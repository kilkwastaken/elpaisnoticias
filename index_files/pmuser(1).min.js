/*! For license information please see pmuser.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.pmuser=e():t.pmuser=e()}(self,(()=>(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(){n=function(){return e};var t,e={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:I(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var y="suspendedStart",v="suspendedYield",d="executing",g="completed",m={};function b(){}function w(){}function k(){}var x={};f(x,s,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(N([])));S&&S!==o&&i.call(S,s)&&(x=S);var O=k.prototype=b.prototype=Object.create(x);function L(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function U(t,e){function n(o,a,c,s){var u=p(t[o],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==r(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,s)}))}s(u.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}})}function I(e,r,n){var o=y;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=p(e,r,n);if("normal"===u.type){if(o=n.done?g:v,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=g,n.method="throw",n.arg=u.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return w.prototype=k,a(O,"constructor",{value:k,configurable:!0}),a(k,"constructor",{value:w,configurable:!0}),w.displayName=f(k,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,f(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},L(U.prototype),f(U.prototype,u,(function(){return this})),e.AsyncIterator=U,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new U(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(O),f(O,l,"Generator"),f(O,s,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function o(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function c(t){o(a,n,i,c,s,"next",t)}function s(t){o(a,n,i,c,s,"throw",t)}c(void 0)}))}}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function c(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}t.r(e),t.d(e,{default:()=>Kt});var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.strategy=e}var e,r,o,c,s,u,l,f,h,p,y,v;return e=t,r=[{key:"setStrategy",value:function(t){this.strategy=t}},{key:"isSubscriber",value:(v=i(n().mark((function t(){var e,r=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(e=this.strategy).isSubscriber.apply(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"getSessionType",value:(y=i(n().mark((function t(){var e,r=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(e=this.strategy).getSessionType.apply(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"getUserType",value:(p=i(n().mark((function t(){var e,r=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(e=this.strategy).getUserType.apply(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"getSkusAndEntitlements",value:(h=i(n().mark((function t(){var e,r=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(e=this.strategy).getSkusAndEntitlements.apply(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getSkus",value:(f=i(n().mark((function t(){var e,r=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(e=this.strategy).getSkus.apply(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"getEntitlements",value:(l=i(n().mark((function t(){var e,r=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(e=this.strategy).getEntitlements.apply(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"isUserLoggedIn",value:(u=i(n().mark((function t(){var e,r=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(e=this.strategy).isUserLoggedIn.apply(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"getUserInfo",value:(s=i(n().mark((function t(){var e,r=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(e=this.strategy).getUserInfo.apply(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"getUserInfoForCookie",value:(c=i(n().mark((function t(){var e,r=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(e=this.strategy).getUserInfoForCookie.apply(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"setCookieUserInfo",value:(o=i(n().mark((function t(){var e,r=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(e=this.strategy).setCookieUserInfo.apply(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"doActionCookie",value:function(){var t;return(t=this.strategy).doActionCookie.apply(t,arguments)}},{key:"checkFieldCookieUserInfo",value:function(){var t;return(t=this.strategy).checkFieldCookieUserInfo.apply(t,arguments)}}],r&&a(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),u={arc:{elpais:{sandbox:"https://publicapi.sandbox.elpais.com",production:"https://publicapi.elpais.com"},cincodias:{sandbox:"https://prisa-cinco-dias-sandbox.api.arc-cdn.net",production:"https://prisa-cinco-dias-prod.api.arc-cdn.net"},englishElpais:{sandbox:"https://publicapi.sandbox.english.elpais.com",production:"https://publicapi.english.elpais.com"}},usun:{sandbox:"https://services.reg.des.elpais.com",production:"https://services.users.elpais.com"},entitlements:{sandbox:[5845259671288364,5347006269407285],production:[0x9fc88ab293dca]},userSegmentation:{type:"aep",aep:{mode:"cookie",ckName:"pmsegments",verifyUid:!0}}},l={sandbox:{domain:["reg.des","pre"],url:"https://sandbox-static.prisa.com",path:"user/avatares/"},produccion:{domain:[""],url:"https://static.prisa.com",path:"user/avatares/"}};const f=function(){return{domains:{default:{apiOriginArc:u.arc.elpais.production,apiOriginUsun:u.usun.production,identitySource:"usun",disableCache:!0,fallBackRt:!0,refreshUserInfo:!1,entitlements:u.entitlements.production,userSegmentation:u.userSegmentation[u.userSegmentation.type]},localhost:{apiOriginUsun:u.usun.sandbox,apiOriginArc:u.arc.elpais.sandbox,identitySource:"arc",entitlements:u.entitlements.sandbox},"sandbox.web.arc-cdn.net":{apiOriginUsun:u.usun.sandbox,apiOriginArc:u.arc.elpais.sandbox,identitySource:"arc",entitlements:u.entitlements.sandbox},"prisa-el-pais-sandbox.cdn.arcpublishing.com":{apiOriginUsun:u.usun.sandbox,apiOriginArc:u.arc.elpais.sandbox,identitySource:"arc",entitlements:u.entitlements.sandbox},"sandbox.prisa.arcpublishing.com":{apiOriginUsun:u.usun.sandbox,apiOriginArc:u.arc.elpais.sandbox,identitySource:"arc",entitlements:u.entitlements.sandbox},"prisa-cinco-dias-sandbox.web.arc-cdn.net":{apiOriginUsun:u.usun.sandbox,apiOriginArc:u.arc.cincodias.sandbox,identitySource:"arc",entitlements:u.entitlements.sandbox},"reg.des.elpais.com":{apiOriginUsun:u.usun.sandbox,apiOriginArc:u.arc.elpais.sandbox,identitySource:"arc",entitlements:u.entitlements.sandbox},"reg.des.cadenaser.com":{apiOriginUsun:u.usun.sandbox,identitySource:"usun"},"reg.des.diarioas.com":{apiOriginUsun:u.usun.sandbox,identitySource:"usun"},"elpais.com":{apiOriginArc:u.arc.elpais.production,apiOriginUsun:u.usun.production,entitlements:u.entitlements.production,identitySource:"arc"},"english.elpais.com":{apiOriginArc:u.arc.englishElpais.production,apiOriginUsun:u.usun.production,entitlements:u.entitlements.production,identitySource:"arc"},"cincodias.elpais.com":{apiOriginArc:u.arc.cincodias.production,apiOriginUsun:u.usun.production,entitlements:u.entitlements.production,identitySource:"arc"},"plus.elpais.com":{apiOriginArc:u.arc.elpais.production,apiOriginUsun:u.usun.production,entitlements:u.entitlements.production,identitySource:"arc"}}}};var h=function(t){return"boolean"==typeof t},p=function(t){return t.match(/^(http|https):\/\/[^ "]+$/)},y=function(t){return"boolean"==typeof t},v=function(t,e){return e.includes(t)};function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function g(){g=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:I(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",m={};function b(){}function w(){}function k(){}var x={};u(x,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(N([])));S&&S!==r&&n.call(S,a)&&(x=S);var O=k.prototype=b.prototype=Object.create(x);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function U(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==d(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function I(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(d(e)+" is not iterable")}return w.prototype=k,o(O,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:w,configurable:!0}),w.displayName=u(k,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},L(U.prototype),u(U.prototype,c,(function(){return this})),e.AsyncIterator=U,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new U(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function m(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}var b=function(t,e,r){var n=void 0===t?e:t;if(!h(n))throw new Error("Invalid configuration disable cache ");var o=void 0!==r&&r;if(!y(o))throw new Error("Invalid configuration fallback");return!(n||!o)&&o},w=function(t){for(var e=atob(t),r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return new TextDecoder("utf-8").decode(r)},k=function(t){var e=new TextDecoder("iso-8859-1").decode((new TextEncoder).encode(t));return btoa(e)},x=function(t,e){var r=new CustomEvent(t,{detail:e});window.dispatchEvent(r)},E=function(t){var e;try{e=JSON.parse(t)}catch(t){}x("onPmUserInit",e)},S=function(t,e){new URLSearchParams(window.location.search).has("enablelog")&&console.log(t,e||"")},O=function(){var t,e=(t=g().mark((function t(e){var r,n,o;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new URL(e),n=r.hostname,t.next=4,fetch("https://".concat(n,"/dist/subs/pmuser/projects.json"));case 4:if((o=t.sent).ok){t.next=7;break}throw new Error("Failed to fetch projects data");case 7:return t.abrupt("return",o.json());case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){m(i,n,o,a,c,"next",t)}function c(t){m(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),L=function(t){var e=document.cookie.match(new RegExp("(^| )".concat(t,"=([^;]+)")));if(e&&"uid_ns"===t){var r=function(t){for(var e=document.cookie.split(";"),r="",n=0;n<e.length;n+=1){var o=e[n].trim(),i=o.indexOf("="),a=o.substring(0,i).trim(),c=o.substring(i+1);if(a===t){if(c.split("#").length>1){r=c;break}0===r.length&&(r=c)}}return""!==r?r:void 0}(t);return r}return e?e[2]:void 0},U=function(){var t=L("uid_ns");return{hasCookie:t&&t.split("#").filter((function(t){return""!==t.trim()})).length>1,cookieUID:t}},I=function(t,e){try{var r=new Date;r.setDate(r.getDate()+365);var n=[t,e].join("="),o=["expires",r].join("="),i=function(){for(var t=["es","com","mx","co","cl","fm"],e=window.location.hostname.split("."),r="",n=0;n<e.length;n+=1){var o=e[n];r=t.includes(o)?[r,o].join("."):o}return r||e.slice(-2).join(".")}(),a=["domain",i=[".",i].join("")].join("=");S("setCookie - domainPpal: ",i),S("setCookie - valor de la cookie: ",n),document.cookie=[n,o,a,"path=/","samesite=none","Secure"].join(";")}catch(t){throw new Error("setCookie:",t)}},j=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},P=function(){var t=localStorage.getItem("ArcId.USER_INFO");return t&&j(t)?JSON.parse(t):{}};function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function T(){T=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:L(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(N([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==C(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=U(c,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:p,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function U(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,U(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(C(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(O.prototype),u(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=C(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==C(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}var F=function(){var t,e=(t=T().mark((function t(e,r){var n,o,i,a=arguments;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},o={mode:"cors",cache:"no-cache",credentials:"same-origin",headers:_({"Content-Type":"application/json"},a.length>3&&void 0!==a[3]?a[3]:{}),redirect:"follow",referrerPolicy:"no-referrer"},t.prev=3,t.next=6,fetch(e,_(_({},o),{},{method:r,body:"GET"!==r?n:void 0}));case 6:return i=t.sent,t.abrupt("return",i);case 10:throw t.prev=10,t.t0=t.catch(3),console.error("ERROR:".concat(t.t0)),t.t0;case 14:case"end":return t.stop()}}),t,null,[[3,10]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){A(i,n,o,a,c,"next",t)}function c(t){A(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function D(){D=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:L(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(C([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==G(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=U(c,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:p,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function U(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,U(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(G(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(O.prototype),u(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function R(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function M(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){R(i,n,o,a,c,"next",t)}function c(t){R(i,n,o,a,c,"throw",t)}a(void 0)}))}}function B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J(n.key),n)}}function Y(t,e,r){return(e=J(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J(t){var e=function(t,e){if("object"!=G(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==G(e)?e:String(e)}var W=function(){function t(e){var r=e.apiOriginArc,n=e.apiOriginUsun;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Y(this,"apiOriginArc",void 0),Y(this,"apiOriginUsun",void 0),this.apiOriginUsun=n||"https://services.users.elpais.com",this.apiOriginArc=r||"https://publicapi.elpais.com"}var e,r,n,o;return e=t,r=[{key:"checkInfoLocal",value:function(){try{var t=P(),e=t.accessToken,r=t.refreshToken;return!(!e||!r)&&this.checkAccessToken(r)}catch(t){throw console.log(t),new Error("Not implemented")}}},{key:"checkAccessToken",value:function(t){try{var e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return 1e3*JSON.parse(window.atob(e)).exp>=Date.now()}catch(t){throw console.log(t),new Error("Not implemented")}}},{key:"getAccessToken",value:(o=M(D().mark((function t(){var e,r,n,o,i,a,c,s=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:null,t.prev=1,r=P(),n=r.refreshToken,i=JSON.stringify({token:e||n,grantType:"refresh-token"}),a="".concat(this.apiOriginArc,"/identity/public/v1/auth/token"),t.next=7,F(a,"POST",i);case 7:if(200!==(c=t.sent).status){t.next=13;break}return t.next=11,c.json();case 11:o=t.sent,localStorage.setItem("ArcId.USER_INFO",JSON.stringify(o));case 13:return t.abrupt("return",c);case 16:throw t.prev=16,t.t0=t.catch(1),console.log(t.t0),new Error("Not implemented");case 20:case"end":return t.stop()}}),t,this,[[1,16]])}))),function(){return o.apply(this,arguments)})},{key:"refreshToken",value:(n=M(D().mark((function t(){var e,r,n=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(n.length>0&&void 0!==n[0]?n[0]:{}).refreshToken,t.next=3,this.getAccessToken(e);case 3:if(200!==t.sent.status){t.next=7;break}return r=P(),t.abrupt("return",r.accessToken);case 7:throw new Error("Unable to refresh token");case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"checkAccessTokenExpiresIn",value:function(t,e){try{var r=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return 1e3*JSON.parse(window.atob(r)).exp<Date.now()+1e3*e}catch(t){throw console.log(t),new Error("Not implemented")}}}],r&&B(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function z(){z=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:L(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(C([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==V(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=U(c,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:p,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function U(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,U(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(V(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(O.prototype),u(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function $(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function K(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H(n.key),n)}}function q(t,e,r){return(e=H(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H(t){var e=function(t,e){if("object"!=V(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==V(e)?e:String(e)}var Q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),q(this,"cookieUserInfoName","pmuser"),q(this,"cookieUserInfoFields",["skus","entitlements","uuid","refreshToken","uid","nickname","UT","NOM","AP1","lastUpdated"])}var e,r,n,o;return e=t,r=[{key:"checkCookieUserInfo",value:function(){try{var t=Date.now(),e=L(this.cookieUserInfoName);return{hasCookieUserInfo:e&&JSON.parse(e).lastUpdated+72e5>t||!1,cookieUserInfo:e}}catch(t){return console.error("UserInfoCookie - checkCookieUserInfo: formato"),{hasCookieUserInfo:!1,cookieUserInfo:""}}}},{key:"setCookieUserInfo",value:(n=z().mark((function t(e){return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,I(this.cookieUserInfoName,e),t.abrupt("return",!0);case 5:throw t.prev=5,t.t0=t.catch(0),console.error("UserInfoCookie - setCookieUserInfo: error al setear cookie"),new Error("UserInfoCookie - setCookieUserInfo : Not implemented:",t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,5]])})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){$(i,r,o,a,c,"next",t)}function c(t){$(i,r,o,a,c,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})},{key:"refreshCookieUserInfo",value:function(){try{var t=L(this.cookieUserInfoName);if(t){var e=JSON.parse(t),r=e.skus,n=e.entitlements,o=e.uuid,i=e.nickname,a=e.refreshToken,c=e.firstName,s=e.lastName,u={skus:r,entitlements:n,uuid:o,refreshToken:a,uid:e.uid,nickname:i,UT:"PENDING",NOM:c,AP1:s,lastUpdated:0},l=JSON.stringify(u);return I(this.cookieUserInfoName,l),!0}return!1}catch(t){throw console.error("refreshCookieUserInfo: error al refrescar cookie"),new Error("Not implemented:",t)}}},{key:"clearCookieUserInfo",value:function(){try{var t={skus:[],entitlements:[],UT:"ANONYMOUS",lastUpdated:Date.now()},e=JSON.stringify(t);return I(this.cookieUserInfoName,e),!0}catch(t){throw console.error("clearCookieUserInfo: error al limpiar cookie"),new Error("Not implemented:",t)}}},{key:"getCookieUserInfo",value:function(){var t={skus:[],entitlements:[]};try{var e=L(this.cookieUserInfoName);if(e){var r=JSON.parse(e);t={skus:r.skus,entitlements:r.entitlements}}return t}catch(t){throw console.error("getCookieUserInfo: error al obtener la informacion de cookie"),new Error("Not implemented:",t)}}},{key:"deleteCookieUserInfo",value:function(){try{return function(t){try{var e=new Date;e.setDate(e.getDate()-365);var r=[t,""].join("="),n=["expires",e].join("="),o=window.location.hostname.split(".").slice(-2).join("."),i=["domain",o=[".",o].join("")].join("=");document.cookie=[r,n,i,"path=/"].join(";")}catch(t){throw new Error("deleteCookie:",t)}}(this.cookieUserInfoName),console.info("deleteCookieUserInfo"),!0}catch(t){throw console.error("deleteCookieUserInfo: error al borrar cookie"),new Error("Not implemented:",t)}}},{key:"readCookieUserInfo",value:function(){try{return L(this.cookieUserInfoName)}catch(t){throw console.error("readCookieUserInfo: error al obtener cookie"),new Error("Not implemented:",t)}}},{key:"getUserInfoForCookieUSUN",value:function(){var t,e,r,n,o=Date.now(),i=U(),a=i.hasCookie,c=i.cookieUID;if(a){var s=c.split("#");if(t=s.at(0),e=s.at(1),s.length>3){var u=s.at(3).split(":");if(void 0!==u.at(2)){var l=u.at(2).split("|");void 0!==l.at(0)&&l.at(0).includes("NOM")?r=void 0!==l.at(1)?l.at(1):r:void 0!==l.at(0)&&l.at(0).includes("AP1")&&(n=void 0!==l.at(1)?l.at(1):n)}if(void 0!==u.at(3)){var f=u.at(3).split("|");n=void 0!==f.at(1)?f.at(1):n}}var h={uid:t,nickname:e,UT:"REGISTERED",lastUpdated:o};return null!=r&&(h.NOM=r),null!=n&&(h.AP1=n),h}return{UT:"ANONYMOUS",lastUpdated:o}}},{key:"checkFieldCookieUserInfo",value:function(t){try{return!!this.cookieUserInfoFields.includes(t)}catch(t){throw console.error("checkFieldCookieUserInfo: error al validar campo"),new Error("Not implemented:",t)}}}],r&&K(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Z(){Z=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:L(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(C([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==X(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=U(c,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:p,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function U(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,U(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(X(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(O.prototype),u(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function tt(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function et(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){tt(i,n,o,a,c,"next",t)}function c(t){tt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ot(n.key),n)}}function nt(t,e,r){return(e=ot(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ot(t){var e=function(t,e){if("object"!=X(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X(e)?e:String(e)}var it=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.identitySource,n=e.fallBackRt,o=e.apiOriginArc,i=e.apiOriginUsun,a=e.disableCache,c=e.entitlements;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),nt(this,"apiOriginArc",void 0),nt(this,"apiOriginUsun",void 0),nt(this,"disableCache",void 0),nt(this,"userSession",void 0),nt(this,"identitySource",void 0),nt(this,"fallBackRt",void 0),nt(this,"configEntitlements",void 0),this.identitySource=r||null,this.disableCache="boolean"!=typeof a||a,this.apiOriginUsun=i||"https://services.users.elpais.com",this.apiOriginArc=o||"https://publicapi.elpais.com",this.fallBackRt="boolean"!=typeof n||n,this.configEntitlements=c||[],this.userSession=new W({apiOriginArc:o,apiOriginUsun:i}),this.userCookie=new Q}var e,r,n,o,i,a,c,s,u,l,f,h;return e=t,r=[{key:"isSubscriber",value:(h=et(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("This method must be implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"getSessionType",value:(f=et(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("This method must be implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"getUserType",value:(l=et(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("This method must be implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)})},{key:"getSkusAndEntitlements",value:(u=et(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("This method must be implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"getSkus",value:(s=et(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("This method must be implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"getEntitlements",value:(c=et(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("This method must be implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"isUserLoggedIn",value:(a=et(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("This method must be implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"getUserInfo",value:(i=et(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("This method must be implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"getUserInfoForCookie",value:(o=et(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("This method must be implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"setCookieUserInfo",value:(n=et(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("This method must be implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"doActionCookie",value:function(t){var e=!1;try{switch(t){case"delete":e=this.userCookie.deleteCookieUserInfo();break;case"clear":e=this.userCookie.clearCookieUserInfo();break;case"refresh":e=this.userCookie.refreshCookieUserInfo();break;case"check":e=this.userCookie.checkCookieUserInfo();break;case"get":e=this.userCookie.getCookieUserInfo();break;case"read":e=this.userCookie.readCookieUserInfo();break;default:throw new Error("Invalid action")}return e}catch(t){throw console.error("doActionCookie: error doAction"),new Error("Not implemented:",t)}}},{key:"checkFieldCookieUserInfo",value:function(t){try{return this.userCookie.checkFieldCookieUserInfo(t)}catch(t){throw console.error("checkFieldCookieUserInfo: error checkField"),new Error("Not implemented:",t)}}}],r&&rt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}function ct(){ct=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:L(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(C([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==at(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=U(c,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:p,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function U(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,U(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(at(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(O.prototype),u(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function st(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lt(n.key),n)}}function lt(t){var e=function(t,e){if("object"!=at(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==at(e)?e:String(e)}function ft(t,e){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ft(t,e)}function ht(t){var e=pt();return function(){var r,n=yt(t);if(e){var o=yt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===at(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function pt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pt=function(){return!!t})()}function yt(t){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yt(t)}var vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e)}(a,t);var e,r,n,o,i=ht(a);function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,r=[{key:"isSubscriber",value:function(){var t=this.getUserInfo();return S("isSubscriber: respuesta de getUserInfo: ----\x3e",t),0===t.code}},{key:"getSessionType",value:function(){var t=this.getUserInfo();S("getSessionType: respuesta de getUserInfo: ----\x3e",t);var e=t.code;return 0===e||3===e?"SUBSCRIBER":1===e?"REGISTERED":2===e?"ANONYMOUS":void 0}},{key:"getUserType",value:function(){var t=this.getUserInfo();S("getAccessType - LOCAL: respuesta de getUserInfo: ----\x3e",t);var e,r=t.code;return 0===r&&(e="T1"),1===r&&(e="REGISTERED"),2===r&&(e="ANONYMOUS"),3===r&&(e="T2"),{code:e,data:t.data}}},{key:"getSkusAndEntitlements",value:function(){return{skus:this.getSkus(),entitlements:this.getEntitlements()}}},{key:"getSkus",value:function(){var t=this.getUserInfo();return S("getSkus - LOCAL : respuesta de getUserInfo: ----\x3e",t),0===t.code?t.data.skus:[]}},{key:"getEntitlements",value:function(){var t=this.getUserInfo();return S("getEntitlements - LOCAL : respuesta de getUserInfo: ----\x3e",t),0===t.code?t.data.entitlements:[]}},{key:"isUserLoggedIn",value:function(){try{if("arc"===this.identitySource){var t=P(),e=t.accessToken,r=t.refreshToken;return e&&r&&this.userSession.checkAccessToken(r)?1:2}return U().hasCookie?1:2}catch(t){throw console.log(t),new Error("Not implemented")}}},{key:"getUserInfo",value:function(){try{var t,e,r=[];if(!0===this.userSession.checkInfoLocal()){t=1;var n=P().uuid,o=function(){var t=localStorage.getItem("ArcP");return S("getArcP --\x3e ArcP:",t),t&&j(t)?JSON.parse(t):{}}();if(S("ArcP :",o[n]),o&&n){var i,a,c=null!==(i=o[n])&&void 0!==i&&i.sub?o[n].sub.p:[];c.length>0&&(t=0);var s=null!==(a=o[n])&&void 0!==a&&a.ent?o[n].ent.e:[];if(S("getUserInfo LOCAL: entitls en ArcP:",s),s.length>0){t=0;for(var u=0;u<s.length;u+=1)if(v(s[u],this.configEntitlements)){t=3;break}}r=1===t?null:{skus:c,entitlements:s}}else e="Usuario no tiene SKUs",r=null}else t=2,e="Usuario no está logado",r=null;return{code:t,msg:e,data:r}}catch(t){throw console.log(t),new Error("Not implemented")}}},{key:"getUserInfoForCookie",value:function(){try{if("usun"===this.identitySource)return this.userCookie.getUserInfoForCookieUSUN();var t,e,r,n,o,i;if(!0===this.userSession.checkInfoLocal()){var a=P();n=a.refreshToken,r=a.uuid}var c=(g=localStorage.getItem("ArcId.USER_PROFILE"),S("getArcProfile --\x3e :",g),g&&j(g)?JSON.parse(g):{});c&&(o=c.firstName,i=c.lastName);var s=U(),u=s.hasCookie,l=s.cookieUID;if(u){var f=l.split("#");t=f.at(0),e=f.at(1)}var h=Date.now(),p=this.getUserType(),y=p.data,v=p.code,d={skus:null!==y?y.skus:[],entitlements:null!==y?y.entitlements:[],uuid:r,refreshToken:n,uid:t,nickname:e,UT:v,lastUpdated:h};return null!=o&&(d.NOM=k(o)),null!=i&&(d.AP1=k(i)),d}catch(t){throw new Error("Not implemented:",t)}var g}},{key:"setCookieUserInfo",value:(n=ct().mark((function t(e){var r,n,o;return ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.dataCookieFixed,t.prev=1,S("setCookieUserInfo LOCAL : refresca la cookie"),n=r||this.getUserInfoForCookie(),!(Object.keys(n).length>0)){t.next=7;break}return o=JSON.stringify(n),t.abrupt("return",this.userCookie.setCookieUserInfo(o));case 7:return t.abrupt("return",!1);case 10:throw t.prev=10,t.t0=t.catch(1),console.error("setCookieUserInfo: error al setear cookie pmuser"),new Error("setCookieUserInfo : Not implemented:",t.t0);case 14:case"end":return t.stop()}}),t,this,[[1,10]])})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){st(i,r,o,a,c,"next",t)}function c(t){st(i,r,o,a,c,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}],r&&ut(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(it);function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function gt(){gt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:L(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(C([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==dt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=U(c,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:p,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function U(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,U(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(dt(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(O.prototype),u(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function mt(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function bt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){mt(i,n,o,a,c,"next",t)}function c(t){mt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kt(n.key),n)}}function kt(t){var e=function(t,e){if("object"!=dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dt(e)?e:String(e)}function xt(t,e){return xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xt(t,e)}function Et(t){var e=St();return function(){var r,n=Ot(t);if(e){var o=Ot(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function St(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(St=function(){return!!t})()}function Ot(t){return Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ot(t)}var Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xt(t,e)}(m,t);var e,r,n,o,i,a,c,s,u,l,f,h,p,y,d,g=Et(m);function m(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),g.apply(this,arguments)}return e=m,r=[{key:"isSubscriber",value:(d=bt(gt().mark((function t(e){var r;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSkusAndEntitlements(e);case 2:if(!((r=t.sent).skus.length>0||r.entitlements.length>0)){t.next=5;break}return t.abrupt("return",!0);case 5:return S("isSuscriber: respuesta de getSkusAndEntitlements - remoto: ----\x3e",r),t.abrupt("return",!1);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"getSessionType",value:(y=bt(gt().mark((function t(e){var r,n;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isUserLoggedIn();case 2:if(r=t.sent,S("getSessionType: respuesta de isUserLoggedIn - remoto: ----\x3e",r),"arc"===this.identitySource){t.next=11;break}if(0!==r&&3!==r){t.next=7;break}return t.abrupt("return","SUBSCRIBER");case 7:if(1!==r){t.next=9;break}return t.abrupt("return","REGISTERED");case 9:if(2!==r){t.next=11;break}return t.abrupt("return","ANONYMOUS");case 11:if(1===r){t.next=13;break}return t.abrupt("return","ANONYMOUS");case 13:return t.next=15,this.getSkusAndEntitlements(e);case 15:return n=t.sent,S("getSessionType: respuesta de getSkusAndEntitlements - remoto: ----\x3e",n),t.abrupt("return",n.skus.length>0||n.entitlements.length>0?"SUBSCRIBER":"REGISTERED");case 18:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"getUserType",value:(p=bt(gt().mark((function t(e){var r,n,o,i,a,c,s;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("arc"===this.identitySource){t.next=9;break}return t.next=3,this.isUserLoggedIn();case 3:return 0===(n=t.sent)&&(r="T1"),1===n&&(r="REGISTERED"),2===n&&(r="ANONYMOUS"),3===n&&(r="T2"),t.abrupt("return",{code:r,data:[]});case 9:return t.next=11,this.getSkusAndEntitlements(e);case 11:if(o=t.sent,i=!1,!(o.entitlements.length>0)){t.next=22;break}a=0;case 15:if(!(a<o.entitlements.length)){t.next=22;break}if(!v(o.entitlements[a],this.configEntitlements)){t.next=19;break}return i=!0,t.abrupt("break",22);case 19:a+=1,t.next=15;break;case 22:if(c=o.skus.length>0||o.entitlements.length>0||!1,!i){t.next=27;break}r="T2",t.next=35;break;case 27:if(i||!c){t.next=31;break}r="T1",t.next=35;break;case 31:return t.next=33,this.isUserLoggedIn();case 33:s=t.sent,r=1!==s?"ANONYMOUS":"REGISTERED";case 35:return t.abrupt("return",{code:r,data:o});case 36:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"getSkusAndEntitlements",value:(h=bt(gt().mark((function t(e){var r,n;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSkus(e);case 2:return r=t.sent,S("getSkusAndEntitlements: respuesta de getSkus - remoto: ----\x3e",r),t.next=6,this.getEntitlements(e);case 6:return n=t.sent,S("getSkusAndEntitlements: respuesta getEntitlements - remoto: ----\x3e",n),t.abrupt("return",{skus:r,entitlements:n});case 9:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"getSkus",value:(f=bt(gt().mark((function t(e){var r;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getUserInfo("arcSkus",e);case 2:if(r=t.sent,Array.isArray(r.skus)){t.next=5;break}return t.abrupt("return",[]);case 5:return t.abrupt("return",r.skus.map((function(t){return t.sku})));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"getEntitlements",value:(l=bt(gt().mark((function t(e){var r;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getUserInfo("arcEnts",e);case 2:return r=t.sent,t.abrupt("return",Array.isArray(r.zones)?r.zones:[]);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"isUserLoggedIn",value:(u=bt(gt().mark((function t(){var e,r,n,o,i,a,c,s,u,l,f;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"arc"!==this.identitySource){t.next=11;break}if(e=P(),r=e.accessToken,n=e.refreshToken,o=r&&this.userSession.checkAccessToken(r),i=n&&this.userSession.checkAccessToken(n),!o||!i){t.next=7;break}return t.abrupt("return",1);case 7:if(o||!i){t.next=11;break}return t.next=10,this.userSession.getAccessToken();case 10:return t.abrupt("return",1);case 11:if(a=U(),c=a.hasCookie,s=a.cookieUID,!c){t.next=19;break}return u=JSON.stringify({uid_ns:s}),l="".concat(this.apiOriginUsun,"/pmuser.html"),t.next=17,F(l,"POST",u);case 17:return f=t.sent,t.abrupt("return",f.json());case 19:return t.abrupt("return",2);case 22:throw t.prev=22,t.t0=t.catch(0),console.log(t.t0),new Error("Not implemented");case 26:case"end":return t.stop()}}),t,this,[[0,22]])}))),function(){return u.apply(this,arguments)})},{key:"getUserInfo",value:(s=bt(gt().mark((function t(e){var r,n,o,i,a,c=arguments;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={arcSkus:"sales/public/v1/entitlements",arcEnts:"sales/public/v2/subscriptions/entitlements"},n="".concat((c.length>1&&void 0!==c[1]?c[1]:null)||this.apiOriginArc,"/").concat(r[e]),t.prev=3,!1!==this.userSession.checkInfoLocal()){t.next=13;break}return S("es usuario IP?"),t.next=9,F(n,"GET");case 9:return o=t.sent,t.next=12,o.json();case 12:return t.abrupt("return",t.sent);case 13:if(i=P(),a=i.accessToken,this.userSession.checkAccessToken(a)){t.next=19;break}return t.next=18,this.userSession.refreshToken();case 18:a=t.sent;case 19:return S("getUserInfoRemote: pedir ".concat(e," con el token ----\x3e "),a),t.next=22,F(n,"GET",null,{Authorization:"Bearer ".concat(a)});case 22:return o=t.sent,t.abrupt("return",o.json());case 26:throw t.prev=26,t.t0=t.catch(3),console.log(t.t0),new Error("Not implemented");case 30:case"end":return t.stop()}}),t,this,[[3,26]])}))),function(t){return s.apply(this,arguments)})},{key:"getUserInfoForCookie",value:(c=bt(gt().mark((function t(){var e,r,n,o,i,a,c,s,u,l,f,h,p,y,v,d,g,m,b,w,x;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"usun"!==this.identitySource){t.next=3;break}return t.abrupt("return",this.userCookie.getUserInfoForCookieUSUN());case 3:if(e=this.userSession.checkInfoLocal(),S("getUserInfoForCookie - REMOTO: check info session?",e),!0!==e){t.next=25;break}if(u=P(),i=u.refreshToken,o=u.uuid,a=u.accessToken,this.userSession.checkAccessToken(a)){t.next=23;break}return t.prev=12,t.next=15,this.userSession.refreshToken();case 15:a=t.sent,t.next=23;break;case 18:return t.prev=18,t.t0=t.catch(12),t.next=22,this.desconectar();case 22:return t.abrupt("return",t.sent);case 23:l=U(),f=l.hasCookie,h=l.cookieUID,f&&(p=h.split("#"),r=p.at(0),n=p.at(1));case 25:return y=Date.now(),t.next=28,this.getUserType();case 28:if(v=t.sent,d=v.data,g=v.code,!a){t.next=47;break}return t.prev=32,m="".concat(this.apiOriginArc,"/identity/public/v1/profile"),t.next=36,F(m,"GET",null,{Authorization:"Bearer ".concat(a)});case 36:return b=t.sent,t.next=39,b.json();case 39:w=t.sent,c=w.firstName,s=w.lastName,t.next=47;break;case 44:t.prev=44,t.t1=t.catch(32),S("getUserInfoForCookie - REMOTO: error al obtener nombre y apellido",t.t1);case 47:return x={skus:d.skus||[],entitlements:d.entitlements||[],uuid:o,refreshToken:i,uid:r,nickname:n,UT:g,lastUpdated:y},null!=c&&(x.NOM=k(c)),null!=s&&(x.AP1=k(s)),t.abrupt("return",x);case 53:throw t.prev=53,t.t2=t.catch(0),new Error("getUserInfoForCookie :Not implemented:",t.t2);case 56:case"end":return t.stop()}}),t,this,[[0,53],[12,18],[32,44]])}))),function(){return c.apply(this,arguments)})},{key:"setCookieUserInfo",value:(a=bt(gt().mark((function t(){var e,r,n,o=arguments;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(o.length>0&&void 0!==o[0]?o[0]:{}).dataCookieFixed,t.prev=1,t.t0=e,t.t0){t.next=7;break}return t.next=6,this.getUserInfoForCookie();case 6:t.t0=t.sent;case 7:if(r=t.t0,S("cookie:",r),!(Object.keys(r).length>0)){t.next=12;break}return n=JSON.stringify(r),t.abrupt("return",this.userCookie.setCookieUserInfo(n));case 12:return S("setCookieUserInfo - remoto : NO refresca la cookie"),t.abrupt("return",!1);case 16:throw t.prev=16,t.t1=t.catch(1),console.error("setCookieUserInfo - remoto: error al setear cookie pmuser"),new Error("setCookieUserInfo : Not implemented:",t.t1);case 20:case"end":return t.stop()}}),t,this,[[1,16]])}))),function(){return a.apply(this,arguments)})},{key:"refreshAccessToken",value:(i=bt(gt().mark((function t(){var e,r,n=arguments;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(n.length>0&&void 0!==n[0]?n[0]:{}).refreshToken,t.prev=1,t.next=4,this.userSession.refreshToken(e);case 4:return r=t.sent,t.abrupt("return",r);case 8:throw t.prev=8,t.t0=t.catch(1),new Error("refreshAccessToken : Not implemented:",t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return i.apply(this,arguments)})},{key:"desconectar",value:(o=bt(gt().mark((function t(){var e,r,n,o,i,a,c;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.prev=1,e=P(),r=e.uuid,n=e.accessToken,o="".concat(this.apiOriginUsun,"/serviceDisconnect.html"),i=JSON.stringify({ARCId:r,tokenARC:n}),t.next=7,fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:i,credentials:"include",mode:"cors",cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer"});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error("desconectar - usun");case 12:return S("desconectar - remote"),a=L("uid_ns"),S("UID_ns:",a),I("ArcId.USER_INFO",btoa("{}")),localStorage.setItem("ArcId.USER_INFO","{}"),c={skus:[],entitlements:[],UT:"ANONYMOUS",lastUpdated:0},t.abrupt("return",c);case 23:throw t.prev=23,t.t1=t.catch(0),new Error("desconectar : Not implemented:",t.t1);case 26:case"end":return t.stop()}}),t,this,[[0,23],[1,9]])}))),function(){return o.apply(this,arguments)})},{key:"heartbeat",value:(n=bt(gt().mark((function t(){var e,r;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"arc"!==this.identitySource){t.next=18;break}if(!0!==this.userSession.checkInfoLocal()){t.next=18;break}if(e=P(),r=e.accessToken,!this.userSession.checkAccessTokenExpiresIn(r,60)){t.next=17;break}return t.prev=7,t.next=10,this.userSession.refreshToken();case 10:return t.abrupt("return",t.sent);case 13:throw t.prev=13,t.t0=t.catch(7),console.log(t.t0),new Error("Unable to refresh token");case 17:return t.abrupt("return",r);case 18:return t.abrupt("return",null);case 21:throw t.prev=21,t.t1=t.catch(0),console.log(t.t1),new Error("Not implemented");case 25:case"end":return t.stop()}}),t,this,[[0,21],[7,13]])}))),function(){return n.apply(this,arguments)})}],r&&wt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),m}(it);function Ut(t){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function It(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pt(n.key),n)}}function jt(t,e,r){return(e=Pt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pt(t){var e=function(t,e){if("object"!=Ut(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ut(e)?e:String(e)}const Ct=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),jt(this,"data",{uid:void 0,nickname:void 0,nombre:void 0,apellido1:void 0,nombre_bonito:void 0,avatar:void 0}),jt(this,"dataWsUserInfo",{status:-1,id:{uid:void 0,nick:void 0,ts:void 0,nom:void 0,ap1:void 0,nb:void 0,avat:void 0}}),jt(this,"loaded",!1),jt(this,"listeners",[])}var e,r;return e=t,(r=[{key:"getData",value:function(t){return t&&"ws"===t?this.dataWsUserInfo:this.data}},{key:"addListener",value:function(t,e,r){this.loaded?t.call(r,e&&"ws"===e?this.dataWsUserInfo:this.data):this.listeners.push({f:t,fmt:e,obj:r})}},{key:"callListeners",value:function(){this.loadData(),this.loaded=!0,this.listeners.forEach((function(t){t.f.call(t.obj,t.fmt&&"ws"===t.fmt?this.dataWsUserInfo:this.data)}),this)}},{key:"loadData",value:function(){var t,e,r,n;this.getUserDataFromCookieUID(),this.data.uid=this.userData.uid,void 0!==this.userData.nickname&&(this.data=this.userData,this.data.avatar=this.getAvatar(this.data.nickname),this.dataWsUserInfo.status=1,this.dataWsUserInfo.id.uid=this.userData.uid,this.dataWsUserInfo.id.nick=this.userData.nickname,window.PEPuid=this.data.uid,window.PEPuname=this.data.nickname,this.dataWsUserInfo.id.nom=null===(t=this.extraFields)||void 0===t?void 0:t.NOM,this.dataWsUserInfo.id.ap1=null===(e=this.extraFields)||void 0===e?void 0:e.AP1,this.dataWsUserInfo.id.nb=null===(r=this.extraFields)||void 0===r?void 0:r.NB,this.dataWsUserInfo.id.ts=null===(n=this.extraFields)||void 0===n?void 0:n.TS,this.dataWsUserInfo.id.avat=this.data.avatar,S("WSUserInfo - data: ",this.data,this.dataWsUserInfo))}},{key:"getAvatar",value:function(t){if("string"!=typeof t)return"";for(var e=[0,0],r=0;r<t.length;r+=1)e[r%2]+=t[r].charCodeAt(0);for(var n=(e[0]%16).toString(16).toUpperCase();n.length<1;)n="0".concat(n);for(var o=(e[1]%256).toString(16).toUpperCase();o.length<2;)o="0".concat(o);var i=this.getConfigEnv(l),a="".concat(i.url,"/").concat(i.path).concat(n,"/").concat(o,"/").concat(t,".jpg");return S("WSUserInfo - urlAvatar: ",a),a}},{key:"getUserDataFromCookieUID",value:function(){var t,e=function(){var t,e,r=[],n=U(),o=n.hasCookie,i=n.cookieUID;if(o){if((t=i.split("#"))[3]){for(var a=[],c=t[3].match(/:[^|]+|[^:]+/g),s=0;s<c.length;s+=2)a[c[s].substring(1)]=c[s+1].substring(1);r=a}e={uid:t[0],nickname:t[1],extra:r}}else e={uid:i};return e}(),r=e.uid,n=e.nickname,o=e.extra;void 0!==n?(this.extraFields=o,t={uid:r,nickname:n,nombre:o.NOM?w(o.NOM):"",apellido1:o.AP1?w(o.AP1):"",nombre_bonito:o.NB?w(o.NB):"",ts:o.TS?o.TS:""}):t={uid:r},this.userData=t}},{key:"getConfigEnv",value:function(){var t=window.location.hostname,e=this.getSubdomain(t),r=Object.keys(l).find((function(t){return l[t].domain.includes(e)}));return r?l[r]:l.produccion}},{key:"getSubdomain",value:function(t){var e=t.split(".");return e.length>2?e.slice(0,e.length-2).join("."):""}},{key:"trackAgain",value:function(){S("WSUserInfo - trackAgain")}}])&&It(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function Nt(t){return function(t){if(Array.isArray(t))return _t(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return _t(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_t(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function At(){At=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:L(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(C([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==Tt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=U(c,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:p,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function U(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,U(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Tt(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(O.prototype),u(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function Ft(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function Gt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ft(i,n,o,a,c,"next",t)}function c(t){Ft(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Rt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(r),!0).forEach((function(e){Bt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yt(n.key),n)}}function Bt(t,e,r){return(e=Yt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yt(t){var e=function(t,e){if("object"!=Tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tt(e)?e:String(e)}const Jt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Bt(this,"identitySource",void 0),Bt(this,"disableCache",void 0),Bt(this,"apiOriginUsun",void 0),Bt(this,"apiOriginArc",void 0),Bt(this,"fallBackRt",void 0),Bt(this,"refreshUserInfo",void 0),Bt(this,"localDataProvider",void 0),Bt(this,"remoteDataProvider",void 0),Bt(this,"dataContext",void 0),Bt(this,"configEntitlements",void 0),Bt(this,"configUserSegmentation",void 0),Bt(this,"version",void 0),Bt(this,"user",void 0),this.setProps(e),this.getFieldPMUser=this.getFieldPMUser.bind(this)}var e,r,n,o,i,a,c,u,l,d,g,m,k;return e=t,r=[{key:"setProps",value:function(t){var e,r=Rt(Rt({},f().domains.default),t);if(this.identitySource=r.identitySource,this.disableCache=r.disableCache,this.apiOriginUsun=r.apiOriginUsun,this.apiOriginArc=r.apiOriginArc,this.fallBackRt=r.fallBackRt,this.refreshUserInfo=r.refreshUserInfo,this.configEntitlements=r.entitlements,this.configUserSegmentation=r.userSegmentation,e=this.identitySource,!(["arc","usun"].includes(e)&&h(this.disableCache)&&this.apiOriginUsun.match(/^(http|https):\/\/[^ "]+$/)&&p(this.apiOriginArc)&&y(this.fallBackRt)&&"boolean"==typeof this.refreshUserInfo))throw new Error("Invalid configuration");this.localDataProvider=new vt(r),this.remoteDataProvider=new Lt(r),this.dataContext=new s,this.scriptUrl=document.currentScript?document.currentScript.src:"",this.user=new Ct}},{key:"init",value:(k=Gt(At().mark((function t(){var e,r=arguments;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(r.length>0&&void 0!==r[0]?r[0]:{}).disableCache,this.setStrategy(e),this.version=this.getVersion(),x("onPmUserLoaded",!0),t.prev=4,S("[pmuser logs - init]"),t.next=8,this.setCookieUserInfo();case 8:window.PMUserCkLoaded=!0,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),console.error(t.t0),console.error("Init: error al setear cookie");case 15:S("[pmuser logs - init]","setCookie");try{this.user.loadData(),S("[PMUser] Init - WSUserInfo loadData:",this.user.data)}catch(t){console.error(t)}case 17:case"end":return t.stop()}}),t,this,[[4,11]])}))),function(){return k.apply(this,arguments)})},{key:"isLoggedIn",value:(m=Gt(At().mark((function t(){var e,r,n=arguments;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(n.length>0&&void 0!==n[0]?n[0]:{}).disableCache,this.setStrategy(e),t.prev=2,t.next=5,this.dataContext.isUserLoggedIn();case 5:return r=t.sent,t.abrupt("return",2!==r);case 9:return t.prev=9,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(){return m.apply(this,arguments)})},{key:"isLoggedInLocal",value:function(){try{return 2!==this.localDataProvider.isUserLoggedIn()}catch(t){return console.error(t),!1}}},{key:"isSubscriber",value:(g=Gt(At().mark((function t(){var e,r,n,o,i=arguments;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(e=i.length>0&&void 0!==i[0]?i[0]:{}).disableCache,n=e.apiOriginArc,this.setStrategy(r),t.prev=2,t.next=5,this.dataContext.isSubscriber(n);case 5:return o=t.sent,t.abrupt("return",o);case 9:return t.prev=9,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(){return g.apply(this,arguments)})},{key:"isSubscriberLocal",value:function(){try{var t=this.readFromCookieUserInfo();return t.skus.length>0||t.entitlements.length>0}catch(t){return console.error(t),!1}}},{key:"getSessionType",value:(d=Gt(At().mark((function t(){var e,r,n,o,i=arguments;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(e=i.length>0&&void 0!==i[0]?i[0]:{}).disableCache,n=e.apiOriginArc,this.setStrategy(r),t.prev=2,S("pmuser - getSessionType - apiOriginArc:",n),t.next=6,this.dataContext.getSessionType(n);case 6:return o=t.sent,t.abrupt("return",o);case 10:return t.prev=10,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return","ANONYMOUS");case 14:case"end":return t.stop()}}),t,this,[[2,10]])}))),function(){return d.apply(this,arguments)})},{key:"getUserType",value:(l=Gt(At().mark((function t(){var e,r,n,o,i,a,c=arguments;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(e=c.length>0&&void 0!==c[0]?c[0]:{}).disableCache,n=e.apiOriginArc,this.setStrategy(r),t.prev=2,S("pmuser - getUserType - apiOriginArc:",n),t.next=6,this.dataContext.getUserType(n);case 6:if("T2"===(o=t.sent).code||!b(r,this.disableCache,this.fallBackRt)){t.next=24;break}if(S("pmuser - getUserType: DisableCache = false,fallBack = true : sin info en local, consulta cookie"),!((i=this.readFromCookieUserInfo()).entitlements.length>0)){t.next=18;break}a=0;case 12:if(!(a<i.entitlements.length)){t.next=18;break}if(!v(i.entitlements[a],this.configEntitlements)){t.next=15;break}return t.abrupt("return","T2");case 15:a+=1,t.next=12;break;case 18:if(!(i.skus.length>0||i.entitlements.length>0)){t.next=20;break}return t.abrupt("return","T1");case 20:return S("pmuser - getUserType: DisableCache = false,fallBack = true : sin info en local, consulta API"),t.next=23,this.remoteDataProvider.getUserType(n);case 23:o=t.sent;case 24:return t.abrupt("return",o.code);case 27:return t.prev=27,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return","ANONYMOUS");case 31:case"end":return t.stop()}}),t,this,[[2,27]])}))),function(){return l.apply(this,arguments)})},{key:"getUserTypeLocal",value:function(){try{var t=this.readFromCookieUserInfo();if(t.entitlements.length>0)for(var e=0;e<t.entitlements.length;e+=1)if(v(t.entitlements[e],this.configEntitlements))return"T2";return t.skus.length>0||t.entitlements.length>0?"T1":this.isLoggedInLocal()?"REGISTERED":"ANONYMOUS"}catch(t){return console.error(t),"ANONYMOUS"}}},{key:"getSkusAndEntitlements",value:(u=Gt(At().mark((function t(){var e,r,n,o,i,a,c,s=arguments;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(e=s.length>0&&void 0!==s[0]?s[0]:{}).disableCache,n=e.apiOriginArc,this.setStrategy(r),!n||p(n)){t.next=4;break}throw new Error("Invalid configuration");case 4:return t.prev=4,t.next=7,this.dataContext.getSkusAndEntitlements(n);case 7:if(o=t.sent,i=o.skus,a=o.entitlements,S("pmuser - getSkusAndEntitlements: respuesta de getSkus: ",i),S("pmuser - getSkusAndEntitlements: respuesta de getEntitlements: ",a),0!==i.length&&0!==a.length||!b(r,this.disableCache,this.fallBackRt)){t.next=20;break}if(!((c=this.readFromCookieUserInfo()).skus.length>0||c.entitlements.length>0)){t.next=16;break}return t.abrupt("return",c);case 16:return S("pmuser - getSkusAndEntitlements: DisableCache = false,fallBack = true : sin info en local, consultar API"),t.next=19,this.remoteDataProvider.getSkusAndEntitlements(n);case 19:return t.abrupt("return",t.sent);case 20:return t.abrupt("return",{skus:i,entitlements:a});case 23:return t.prev=23,t.t0=t.catch(4),console.error(t.t0),t.abrupt("return",{skus:[],entitlements:[]});case 27:case"end":return t.stop()}}),t,this,[[4,23]])}))),function(){return u.apply(this,arguments)})},{key:"getSkus",value:(c=Gt(At().mark((function t(){var e,r,n,o,i,a=arguments;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(e=a.length>0&&void 0!==a[0]?a[0]:{}).disableCache,n=e.apiOriginArc,this.setStrategy(r),t.prev=2,t.next=5,this.dataContext.getSkus(n);case 5:if(0!==(o=t.sent).length||!b(r,this.disableCache,this.fallBackRt)){t.next=15;break}if(S("pmuser - getSkus: DisableCache = false,fallBack = true : sin info en local, consultar cookie"),!((i=this.readFromCookieUserInfo()).skus.length>0)){t.next=11;break}return t.abrupt("return",i.skus);case 11:return S("pmuser - getSkus: DisableCache = false,fallBack = true : sin info en local, consultar API"),t.next=14,this.remoteDataProvider.getSkus(n);case 14:o=t.sent;case 15:return t.abrupt("return",o);case 18:return t.prev=18,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",[]);case 22:case"end":return t.stop()}}),t,this,[[2,18]])}))),function(){return c.apply(this,arguments)})},{key:"getEntitlements",value:(a=Gt(At().mark((function t(){var e,r,n,o,i,a=arguments;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(e=a.length>0&&void 0!==a[0]?a[0]:{}).disableCache,n=e.apiOriginArc,this.setStrategy(r),t.prev=2,t.next=5,this.dataContext.getEntitlements(n);case 5:if(0!==(o=t.sent).length||!b(r,this.disableCache,this.fallBackRt)){t.next=15;break}if(S("pmuser - getEntitlements: DisableCache = false,fallBack = true : sin info en local, consultar cookie"),!((i=this.readFromCookieUserInfo()).entitlements.length>0)){t.next=11;break}return t.abrupt("return",i.entitlements);case 11:return S("pmuser - getEntitlements: DisableCache = false,fallBack = true : sin info en local, consultar API"),t.next=14,this.remoteDataProvider.getEntitlements(n);case 14:o=t.sent;case 15:return t.abrupt("return",o);case 18:return t.prev=18,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",[]);case 22:case"end":return t.stop()}}),t,this,[[2,18]])}))),function(){return a.apply(this,arguments)})},{key:"getUserDataUID",value:function(){try{return function(){var t,e,r,n,o,i=U(),a=i.hasCookie,c=i.cookieUID;if(a){if((e=c.split("#"))[3]){for(var s=[],u=e[3].match(/:[^|]+|[^:]+/g),l=0;l<u.length;l+=2)s[u[l].substring(1)]=u[l+1].substring(1);r=s.NOM?w(s.NOM):"",n=s.AP1?w(s.AP1):"",o=s.NB?w(s.NB):""}t=JSON.stringify({uid:e[0],nickname:e[1],nombre:r,apellido1:n,nombre_bonito:o})}else t=JSON.stringify({uid:c});return t}()}catch(t){return console.error(t),JSON.stringify({uid:""})}}},{key:"setCookieUserInfo",value:(i=Gt(At().mark((function t(){var e,r,n,o,i,a=arguments;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(a.length>0&&void 0!==a[0]?a[0]:{}).disableCache,this.setStrategy(e),t.prev=2,r=!1,n=this.dataContext.doActionCookie("check"),o=n.hasCookieUserInfo,n.cookieUserInfo&&o&&!0!==this.refreshUserInfo){t.next=28;break}return S("pmuser - sin cookie o caducada, o indicacion de refrescarla"),t.next=9,this.dataContext.getUserInfoForCookie();case 9:if(i=t.sent,"arc"!==this.identitySource||!0!==this.refreshUserInfo){t.next=16;break}return t.next=13,this.remoteDataProvider.setCookieUserInfo();case 13:r=t.sent,t.next=26;break;case 16:if("arc"!==this.identitySource||0!==i.skus.length&&0!==i.entitlements.length||!b(e,this.disableCache,this.fallBackRt)){t.next=23;break}return S("pmuser - setCookieUserInfo: DisableCache = false,fallBack = true : sin info en local, consultar API"),t.next=20,this.remoteDataProvider.setCookieUserInfo();case 20:r=t.sent,t.next=26;break;case 23:return t.next=25,this.dataContext.setCookieUserInfo({dataCookieFixed:i});case 25:r=t.sent;case 26:t.next=29;break;case 28:S("pmuser - no refresca cookie");case 29:return t.abrupt("return",r);case 32:throw t.prev=32,t.t0=t.catch(2),new Error("setCookieUserInfo : Not implemented:",t.t0);case 35:case"end":return t.stop()}}),t,this,[[2,32]])}))),function(){return i.apply(this,arguments)})},{key:"deleteCookieUserInfo",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disableCache;this.setStrategy(t);try{return this.dataContext.doActionCookie("delete")}catch(t){return console.error("pmuser - deleteCookieUserInfo: error al borrar cookie"),!1}}},{key:"clearCookieUserInfo",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disableCache;this.setStrategy(t);try{return this.dataContext.doActionCookie("clear")}catch(t){return console.error("pmuser - clearCookieUserInfo: error al limpiar cookie"),!1}}},{key:"refreshCookieUserInfo",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disableCache;this.setStrategy(t);try{return this.dataContext.doActionCookie("refresh")}catch(t){return console.error("pmuser - refreshCookieUserInfo: error al refrescar cookie"),!1}}},{key:"readCookieUserInfo",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disableCache;this.setStrategy(t);try{return this.dataContext.doActionCookie("read")}catch(t){return console.error("pmuser - readCookieUserInfo: error al leer cookie"),!1}}},{key:"readFromCookieUserInfo",value:function(){var t={skus:[],entitlements:[]};try{var e=this.dataContext.doActionCookie("check"),r=e.hasCookieUserInfo;e.cookieUserInfo&&r&&(t=this.dataContext.doActionCookie("get"))}catch(t){console.error("pmuser - readFromCookieUserInfo - error obtener valores cookie")}return t}},{key:"refreshTokenUser",value:(o=Gt(At().mark((function t(){var e,r,n=arguments;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(n.length>0&&void 0!==n[0]?n[0]:{}).refreshToken,t.prev=1,t.next=4,this.remoteDataProvider.refreshAccessToken(e);case 4:return r=t.sent,t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(1),console.error("pmuser - refreshTokenUser - error refreshToken");case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return o.apply(this,arguments)})},{key:"heartbeat",value:(n=Gt(At().mark((function t(){var e;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.remoteDataProvider.heartbeat();case 3:return e=t.sent,t.abrupt("return",e);case 7:return t.prev=7,t.t0=t.catch(0),console.error("pmuser - heartbeat:",t.t0),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return n.apply(this,arguments)})},{key:"getFieldPMUser",value:function(t){try{if(this.dataContext.checkFieldCookieUserInfo(t)){var e=this.dataContext.doActionCookie("read"),r=JSON.parse(e);switch(t){case"NOM":case"AP1":return w(r[t]);default:return r[t]}}return console.error("pmuser - undefined field ",t),null}catch(t){return console.error("pmuser - getFieldPMUser: error al leer cookie"),null}}},{key:"getAEPDestinations",value:function(){try{var t=this.configUserSegmentation,e=t.mode,r=t.ckName,n=t.verifyUid;if(!function(t){return["cookie"].includes(t)}(e))return console.error("pmuser - getAEPDestinations: Not supported User Segmentation Mode: ".concat(e)),{};var o=L(r);if(o){var i,a=null===(i=window.digitalData)||void 0===i||null===(i=i.user)||void 0===i?void 0:i.experienceCloudID,c=JSON.parse(o);return n&&this.isLoggedInLocal()?c[this.getFieldPMUser("uid")]||{}:c[a]||{}}return{}}catch(t){return console.error("pmuser - getAEPDestinations: error getting destinations"),{}}}},{key:"getAEPSegments",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(!Array.isArray(t))return console.error("pmuser - getAEPSegments: destinationNames is not an array"),[];for(var r=[],n=[],o=this.getAEPDestinations(),i=0;i<t.length;i+=1)o[t[i]]&&(n=e?o[t[i]].map((function(t){return t.id})):o[t[i]]),r=Nt(new Set([].concat(Nt(r),Nt(n))));return r}catch(t){return console.error("pmuser - getAEPSegments: error getting segments IDs"),[]}}},{key:"getVersion",value:function(){var t=this;try{var e=this.scriptUrl;O(e).then((function(r){for(var n=0;n<r.length;n+=1){var o=r[n];S("pmuser - getVersion - project",o);var i=o.name,a=o.version,c=o.checkpoints;if(e.includes(i)){S("pmuser - getVersion - URL",e);var s=Object.keys(c).find((function(t){return e.includes(t)})),u=a;if(s)u=c[s];else{var l=e.split("/"),f=l[l.length-2];S("pmuser - getVersion - urlVersion",f),S("pmuser - getVersion - versionToReturn",u=f!==a?f:a)}return t.version=u,u}}return t.version=null,null})).catch((function(e){return console.error("pmuser - getVersion: error getting projects",e),t.version=null,null}))}catch(t){return console.error("pmuser - getVersion: error getting version"),this.version=null,null}return this.version}},{key:"setStrategy",value:function(t){var e=function(t,e){if(void 0===t)return e;if(!h(t))throw new Error("Invalid configuration");return t}(t,this.disableCache)?this.remoteDataProvider:this.localDataProvider;this.dataContext.setStrategy(e)}}],r&&Mt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wt(t){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}function Vt(){Vt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:L(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(C([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==Wt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=U(c,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?v:p,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function U(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,U(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Wt(e)+" is not iterable")}return m.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(O.prototype),u(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function zt(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function $t(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){zt(i,n,o,a,c,"next",t)}function c(t){zt(i,n,o,a,c,"throw",t)}a(void 0)}))}}$t(Vt().mark((function t(){var e,r,n,o;return Vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=function(){window.PRISA=window.PRISA||{user:void 0},window.PRISA.user=window.PMUser.user,window.PRISA.user},n=function(){return(n=$t(Vt().mark((function t(){return Vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.PMUser.init();case 2:E(L("pmuser"));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)},r=function(){return n.apply(this,arguments)},console.log("[PMUser]","PMUser loaded!"),void 0,i=window.location.hostname,e=f().domains[i],window.PMUser=new Jt(e),window.shareSessionUsun?(S("[PMUser]","shareSessionUsun detected, await sharesessionEnd..."),delete window.shareSessionUsun,document.addEventListener("sharesessionEnd",r)):r(),o();case 8:case"end":return t.stop()}var i}),t)})))();const Kt=Jt;return e})()));